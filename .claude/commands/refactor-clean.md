# /refactor-clean

デッドコードを検出・削除するコマンド。

## 実行手順

1. **分析ツール実行**
```bash
bunx knip          # 未使用エクスポート
bunx depcheck      # 未使用依存関係
bunx ts-prune      # TypeScript固有
```

2. **レポート生成**
```markdown
## デッドコード分析

### SAFE（即削除可）
- テストファイル
- 未使用ヘルパー

### CAUTION（要確認）
- APIルート
- コンポーネント

### DANGER（削除禁止）
- 設定ファイル
- エントリーポイント
```

3. **削除提案**
   - 各候補をリスト
   - 参照をgrepで確認
   - 動的インポートを確認

4. **テスト実行**
```bash
bun test
```

5. **削除実行**
   - テストが通る状態で削除
   - 1つずつ削除して確認

6. **完了報告**
```markdown
## クリーンアップ完了

### 削除ファイル
- `path/to/file.ts` - 理由

### 削除コード
- `functionName` in `file.ts` - 理由

### 影響
- 削除行数: XX行
- 削除ファイル数: XX
```

## 削除禁止

- Better Auth設定
- DBクライアント
- oRPCコンテキスト
- 環境変数定義
- Drizzleスキーマ

## 原則

- テストなしで削除しない
- 1つずつ削除して確認
- 削除ログを記録
